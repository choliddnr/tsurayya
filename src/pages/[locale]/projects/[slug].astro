---
import { getCollection } from 'astro:content';
import Layout from '../../../layouts/Layout.astro';
import PageHero from '../../../components/PageHero.astro';

// export async function getStaticPaths() {
//   const posts = await getCollection('blog');
//   return posts.map((post) => ({
//     params: {
//       locale: post.data.lang,
//       slug: post.slug.split('/').slice(1).join('/'),
//     },
//     props: { post },
//   }));
// }

// export function getStaticPaths() {
//   return [{ params: { locale: 'en' } }, { params: { locale: 'id' } }];
// }

// const lang = getLangFromUrl(Astro.url);
// const t = useTranslations(lang);
//
export async function getStaticPaths() {
  const projects = await getCollection('projects');
  return projects.map((project) => ({
    params: {
      locale: project.data.lang,
      slug: project.slug.split('/').slice(1).join('/'),
    },
    props: { project },
  }));
}

const { project } = Astro.props;
const { Content } = await project.render();
---

<Layout title={project.data.title}>
  <PageHero title={project.data.title} description={project.data.description} />
  {
    project.data.image && (
      <img
        src={project.data.image}
        alt={project.data.title}
        class="w-full h-auto rounded-lg mb-8 shadow-lg"
      />
    )
  }
  <div class="prose prose-invert mx-auto">
    <Content />
  </div>

  <!-- {
    project.data.testimonial && (
      <div class="mt-16">
        <h2 class="text-3xl font-extrabold text-white sm:text-4xl mb-8 text-center">
          Client <span class="gradient-text">Testimonial</span>
        </h2>
        <div class="bg-dark/50 backdrop-blur-sm rounded-2xl p-8 border border-white/10">
          <p class="text-lg text-white/80 italic">
            "{project.data.testimonial.text}"
          </p>
          <p class="mt-4 text-right text-white font-bold">
            - {project.data.testimonial.author},{' '}
            {project.data.testimonial.title}
          </p>
        </div>
      </div>
    )
  } -->
</Layout>
