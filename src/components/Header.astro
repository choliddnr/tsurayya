---
import NavDropdown from "./NavDropdown.astro";

const solutionDescription = {
  primary:
    "We craft scalable digital solutions tailored to real-world business challenges.",
  secondary:
    "From websites to AI-powered systems, our solutions are built to solve problems and deliver results.",
};
const solutionsContent = [
  {
    title: "AI & Automation",
    href: "/services",
    description: "Boost efficiency with smart chatbots and workflows.",
  },
  {
    title: "Web Development",
    href: "/services",
    description: "Custom websites and web apps tailored to your goals.",
  },
  {
    title: "Infrastructure",
    href: "/services",
    description: "Reliable, secure, and scalable system setups.",
  },
  {
    title: "Business Tools",
    href: "/services",
    description: "Lead gen, client portals, and internal dashboards.",
  },
];

const technologiesDescription = {
  primary: "We choose proven, modern technologies trusted by the industry.",
  secondary:
    "Our stack is carefully selected for performance, scalability, and long-term reliability.",
};
const technologiesContent = [
  {
    title: "Frontend",
    href: "/technologies",
    description: "Nuxt 3, Vue3, Astrojs, Tailwind CSS, AlpineJS â€” fast & responsive.",
  },
  {
    title: "Backend",
    href: "/technologies",
    description: "Node.js, Bun, PocketBase for powerful APIs.",
  },
  {
    title: "AI Tools",
    href: "/technologies",
    description: "GPT, n8n, Langchain for automation and insight.",
  },
  {
    title: "DevOps & Infra",
    href: "/technologies",
    description: "Docker, Nginx, Kubernetes for modern deployment.",
  },
];

const industriesDescription = {
  primary: "We serve diverse industries with custom-fit digital tools.",
  secondary:
    "No matter your field, we adapt technology to meet your goals and speak your language.",
};
const industriesContent = [
  {
    title: "Food & Beverage",
    href: "/industries",
    description: "Menu tools, ordering systems, AI waiters.",
  },
  {
    title: "Retail & eCommerce",
    href: "/industries",
    description: "Inventory tracking, chat-order bots, storefronts.",
  },
  {
    title: "Agencies",
    href: "/industries",
    description: "Portals, automation, and smart reporting tools.",
  },
  {
    title: "Health & Wellness",
    href: "/industries",
    description: "Booking, support agents, and custom dashboards.",
  },
  {
    title: "Education",
    href: "/industries",
    description: "AI tutors, course systems, certification portals.",
  },
];
---

<header
  id="main-header"
  class="bg-[var(--color-background)] sticky top-0 z-50 transition-shadow transition-transform duration-500 ease-in-out"
>
  <nav
    class="container mx-auto px-6 py-4 flex justify-between items-center bg-dark"
  >
    <div class="text-2xl font-bold">
      <a href="/" class="text-white text-2xl font-bold"
        >Tsurayya<span class="gradient-text">Engineering</span></a
      >
    </div>
    <div class="flex space-x-4 items-center">
      <NavDropdown
        title="Solutions"
        content={solutionsContent}
        description={solutionDescription}
      />
      <NavDropdown
        title="Technologies"
        content={technologiesContent}
        description={technologiesDescription}
      />
      <NavDropdown
        title="Industries"
        content={industriesContent}
        description={industriesDescription}
      />
      <a href="/about" class="text-white hover:text-[var(--color-primary)]"
        >About</a
      >
      <a href="/work" class="text-white hover:text-[var(--color-primary)]"
        >Our Work</a
      >
      <a href="/blog" class="text-white hover:text-[var(--color-primary)]"
        >Blog</a
      >
      <a
        href="/contact"
        class="bg-[var(--color-accent)] text-dark px-4 py-2 rounded-full hover:opacity-90 cyber-button"
        >Schedule a Call</a
      >
    </div>
  </nav>
</header>

<script is:inline>
  document.addEventListener("DOMContentLoaded", () => {
    const header = document.getElementById("main-header");
    let lastScrollTop = 0;
    const scrollThreshold = 50;

    // Show header initially
    header.classList.remove("-translate-y-full");

    window.addEventListener("scroll", () => {
      let currentScroll =
        window.pageYOffset || document.documentElement.scrollTop;

      if (currentScroll > lastScrollTop && currentScroll > scrollThreshold) {
        // Scrolling down past threshold
        header.classList.add("-translate-y-full");
        header.classList.remove("shadow-lg");
      } else if (
        currentScroll < lastScrollTop &&
        currentScroll > scrollThreshold
      ) {
        // Scrolling up past threshold
        header.classList.remove("-translate-y-full");
        header.classList.add("shadow-lg");
      } else if (currentScroll <= scrollThreshold) {
        // At or near the top
        header.classList.remove("-translate-y-full");
        header.classList.remove("shadow-lg");
      }
      lastScrollTop = currentScroll <= 0 ? 0 : currentScroll; // For Mobile or negative scrolling
    });
  });
</script>
